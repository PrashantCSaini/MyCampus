(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"305l":function(r,e,t){"use strict";t.r(e),t.d(e,"AuthModule",function(){return F});var s=t("ofXK"),o=t("tyNb"),a=t("3Pt+"),n=t("tk/3"),i=t("fXoL"),u=t("7zfz"),p=t("Ug1E"),l=t("QIUk"),c=t("7kUa"),m=t("LuMj"),b=t("jIHw"),d=t("Q4Mo"),h=t("FMpt");function f(r,e){if(1&r&&(i.Ob(0,"small",15),i.xc(1),i.Nb()),2&r){const r=i.Xb();i.xb(1),i.zc(" ",r.formErrors.username,"")}}function g(r,e){if(1&r&&(i.Ob(0,"small",16),i.xc(1),i.Nb()),2&r){const r=i.Xb();i.xb(1),i.zc(" ",r.formErrors.password," ")}}function y(r,e){if(1&r&&i.Jb(0,"p-message",17),2&r){const r=i.Xb();i.dc("text",r.errorMessage)}}const v=function(r){return{"ng-invalid ng-dirty":r}};let w=(()=>{class r{constructor(r,e,t,s){this.router=r,this.primengConfig=e,this.auth=t,this.fb=s,this.loginIcon="pi pi-check",this.validationMessages={username:{required:"Username is required",minlength:"Username must be greater than 2 characters",maxlength:"Username must bes less than 20 character"},password:{required:"Password is required",maxlength:"Password must be less than 20 character"}},this.formErrors={username:"",password:""}}ngOnInit(){this.primengConfig.ripple=!0,this.authForm=this.fb.group({username:["",[a.n.required,a.n.minLength(3),a.n.maxLength(20)]],password:["",[a.n.required,a.n.maxLength(30)]],type:["A",a.n.required]}),this.authForm.valueChanges.subscribe(r=>{this.logValidationErrors(this.authForm)}),this.loginData={username:"",password:"",type:""}}loginUser(){this.loginIcon="pi pi-spin pi-spinner",this.mapFormValueToCourseModel(),this.auth.loginUser(this.loginData).subscribe(r=>{localStorage.setItem("token",r),"A"===this.authForm.value.type?this.router.navigate(["/admin"]):"F"===this.authForm.value.type?this.router.navigate(["/faculty"]):"S"===this.authForm.value.type?this.router.navigate(["/student"]):"P"===this.authForm.value.type&&this.router.navigate(["/parent"])},r=>{this.loginIcon="pi pi-check",r instanceof n.d&&401===r.status&&(this.errorMessage="Incorrect username or password.")})}mapFormValueToCourseModel(){this.loginData.username=this.authForm.value.username,this.loginData.password=this.authForm.value.password,this.loginData.type=this.authForm.value.type}logValidationErrors(r=this.authForm){Object.keys(r.controls).forEach(e=>{const t=r.get(e);if(t instanceof a.d)this.logValidationErrors(t);else if(this.formErrors[e]="",t&&!t.valid&&(t.touched||t.dirty)){const r=this.validationMessages[e];for(const s in t.errors)s&&(this.formErrors[e]+=r[s]+" ")}})}}return r.\u0275fac=function(e){return new(e||r)(i.Ib(o.a),i.Ib(u.h),i.Ib(p.a),i.Ib(a.b))},r.\u0275cmp=i.Cb({type:r,selectors:[["app-login"]],decls:24,vars:12,consts:[[1,"p-d-flex","p-jc-center"],[3,"formGroup","ngSubmit"],[1,"p-field"],["for","userName"],["id","userName","type","text","aria-describedby","userName-help","autocomplete","off","pInputText","","formControlName","username",1,"p-inputtext-sm",3,"ngClass","blur"],["id","userName-help","class","p-error",4,"ngIf"],["for","password"],["id","password","type","password","aria-describedby","password-help","autocomplete","off","pInputText","","formControlName","password",1,"p-inputtext-sm",3,"ngClass","blur"],["id","password-help","class","p-error",4,"ngIf"],["inputId","type1","name","type","value","A","formControlName","type","label","Admin",1,"p-mb-2"],["inputId","type2","name","type","value","F","formControlName","type","label","Faculty",1,"p-mb-2"],["inputId","type3","name","type","value","S","formControlName","type","label","Student",1,"p-mb-2"],["inputId","type4","name","type","value","P","formControlName","type","label","Parent",1,"p-mb-2"],["pButton","","type","submit","label","Login","pRipple","",1,"p-button","p-mb-4",3,"disabled","icon"],["severity","warn",3,"text",4,"ngIf"],["id","userName-help",1,"p-error"],["id","password-help",1,"p-error"],["severity","warn",3,"text"]],template:function(r,e){1&r&&(i.Ob(0,"h1"),i.xc(1,"Login Module"),i.Nb(),i.Jb(2,"br"),i.Jb(3,"br"),i.Ob(4,"p-card",0),i.Ob(5,"form",1),i.Vb("ngSubmit",function(){return e.loginUser()}),i.Ob(6,"div",2),i.Ob(7,"label",3),i.xc(8,"Username"),i.Nb(),i.Ob(9,"input",4),i.Vb("blur",function(){return e.logValidationErrors()}),i.Nb(),i.vc(10,f,2,1,"small",5),i.Nb(),i.Ob(11,"div",2),i.Ob(12,"label",6),i.xc(13,"Password"),i.Nb(),i.Ob(14,"input",7),i.Vb("blur",function(){return e.logValidationErrors()}),i.Nb(),i.vc(15,g,2,1,"small",8),i.Nb(),i.Ob(16,"div",2),i.Jb(17,"p-radioButton",9),i.Jb(18,"p-radioButton",10),i.Jb(19,"p-radioButton",11),i.Jb(20,"p-radioButton",12),i.Nb(),i.Jb(21,"button",13),i.Jb(22,"br"),i.vc(23,y,1,1,"p-message",14),i.Nb(),i.Nb()),2&r&&(i.xb(5),i.cc("formGroup",e.authForm),i.xb(4),i.cc("ngClass",i.fc(8,v,e.formErrors.username)),i.xb(1),i.cc("ngIf",e.formErrors.username),i.xb(4),i.cc("ngClass",i.fc(10,v,e.formErrors.password)),i.xb(1),i.cc("ngIf",e.formErrors.password),i.xb(6),i.cc("disabled",e.authForm.invalid)("icon",e.loginIcon),i.xb(2),i.cc("ngIf",e.errorMessage))},directives:[l.a,a.o,a.j,a.e,a.a,c.a,a.i,a.c,s.h,s.j,m.a,b.a,d.a,h.b],styles:[".p-field[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:block}"]}),r})();const x=[{path:"",component:w},{path:"login",component:w}];let I=(()=>{class r{}return r.\u0275mod=i.Gb({type:r}),r.\u0275inj=i.Fb({factory:function(e){return new(e||r)},imports:[[o.d.forChild(x)],o.d]}),r})();var N=t("4TcP");let F=(()=>{class r{}return r.\u0275mod=i.Gb({type:r}),r.\u0275inj=i.Fb({factory:function(e){return new(e||r)},imports:[[s.b,I,N.a]]}),r})()}}]);