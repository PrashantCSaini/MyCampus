(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"305l":function(e,t,r){"use strict";r.r(t),r.d(t,"AuthModule",function(){return C});var a=r("ofXK"),o=r("tyNb"),s=r("3Pt+"),n=r("tk/3"),i=r("fXoL"),u=r("7zfz"),l=r("Ug1E"),c=r("QIUk"),m=r("7kUa"),p=r("LuMj"),d=r("jIHw"),b=r("Q4Mo"),h=r("FMpt");function g(e,t){if(1&e&&(i.Ob(0,"small",16),i.Bc(1),i.Nb()),2&e){const e=i.Xb();i.xb(1),i.Dc(" ",e.formErrors.username,"")}}function f(e,t){if(1&e&&(i.Ob(0,"small",17),i.Bc(1),i.Nb()),2&e){const e=i.Xb();i.xb(1),i.Dc(" ",e.formErrors.password," ")}}function I(e,t){if(1&e&&i.Jb(0,"p-message",18),2&e){const e=i.Xb();i.ec("text",e.errorMessage)}}const E=function(){return{width:"20rem","margin-bottom":"2em",color:"white",background:"linear-gradient(to right,  #1488cc, #2b32b2)"}},v=function(e){return{"ng-invalid ng-dirty":e}};let y=(()=>{class e{constructor(e,t,r,a){this.router=e,this.primengConfig=t,this.auth=r,this.fb=a,this.loginIcon="pi pi-check",this.validationMessages={username:{required:"Username is required",minlength:"Username must be greater than 2 characters",maxlength:"Username must bes less than 20 character"},password:{required:"Password is required",maxlength:"Password must be less than 20 character"}},this.formErrors={username:"",password:""}}ngOnInit(){this.primengConfig.ripple=!0,this.authForm=this.fb.group({username:["",[s.n.required,s.n.minLength(3),s.n.maxLength(20)]],password:["",[s.n.required,s.n.maxLength(30)]],type:["S",s.n.required]}),this.authForm.valueChanges.subscribe(e=>{this.logValidationErrors(this.authForm)}),this.loginData={username:"",password:"",type:""}}loginUser(){this.loginIcon="pi pi-spin pi-spinner",this.mapFormValueToCourseModel(),this.auth.loginUser(this.loginData).subscribe(e=>{localStorage.setItem("token",e),this.getUserId(this.authForm.value.type,this.authForm.value.username),"A"===this.authForm.value.type?this.router.navigate(["/admin"]):"F"===this.authForm.value.type?this.router.navigate(["/faculty"]):"S"===this.authForm.value.type?this.router.navigate(["/student"]):"P"===this.authForm.value.type&&this.router.navigate(["/parent"])},e=>{this.loginIcon="pi pi-check",e instanceof n.d&&401===e.status&&(this.errorMessage="Incorrect username or password.")})}getUserId(e,t){"S"===e?this.auth.getStudentId(t).subscribe(e=>{localStorage.setItem("id",e[0]),localStorage.setItem("courseid",e[1]),localStorage.setItem("semester",e[2]),localStorage.setItem("username",this.authForm.value.username)}):"P"===e?this.auth.getParentId(t).subscribe(e=>{localStorage.setItem("id",e[0]),localStorage.setItem("studentId",e[1]),localStorage.setItem("courseid",e[2]),localStorage.setItem("semester",e[3]),localStorage.setItem("username",this.authForm.value.username)}):"F"===e?this.auth.getFacultyId(t).subscribe(e=>{localStorage.setItem("id",e),localStorage.setItem("username",this.authForm.value.username)}):(localStorage.setItem("id","0"),localStorage.setItem("username",this.authForm.value.username))}mapFormValueToCourseModel(){this.loginData.username=this.authForm.value.username,this.loginData.password=this.authForm.value.password,this.loginData.type=this.authForm.value.type}logValidationErrors(e=this.authForm){Object.keys(e.controls).forEach(t=>{const r=e.get(t);if(r instanceof s.d)this.logValidationErrors(r);else if(this.formErrors[t]="",r&&!r.valid&&(r.touched||r.dirty)){const e=this.validationMessages[t];for(const a in r.errors)a&&(this.formErrors[t]+=e[a]+" ")}})}}return e.\u0275fac=function(t){return new(t||e)(i.Ib(o.b),i.Ib(u.h),i.Ib(l.a),i.Ib(s.b))},e.\u0275cmp=i.Cb({type:e,selectors:[["app-login"]],decls:26,vars:15,consts:[["header","MyCampus","subheader","User Login","styleClass","p-card-shadow",1,"p-d-flex","p-jc-center"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","p-grid"],[1,"p-field","p-col-12","p-md-12"],["for","userName"],["id","userName","type","text","aria-describedby","userName-help","autocomplete","off","pInputText","","formControlName","username",1,"p-inputtext-sm",2,"color","black",3,"ngClass","blur"],["id","userName-help","class","p-error",4,"ngIf"],["for","password"],["id","password","type","password","aria-describedby","password-help","autocomplete","off","pInputText","","formControlName","password",1,"p-inputtext-sm",2,"color","black",3,"ngClass","blur"],["id","password-help","class","p-error",4,"ngIf"],["inputId","type3","name","type","value","S","formControlName","type","label","Student",1,"p-mb-2","p-mr-2"],["inputId","type2","name","type","value","F","formControlName","type","label","Faculty",1,"p-mb-2","p-mr-2"],["inputId","type4","name","type","value","P","formControlName","type","label","Parent",1,"p-mb-2","p-mr-2"],["inputId","type1","name","type","value","A","formControlName","type","label","Admin",1,"p-mb-2"],["pButton","","type","submit","label","Login","pRipple","",1,"p-button-raised","p-button-text","p-mb-2",2,"background-color","white","font-weight","bold",3,"disabled","icon"],["severity","warn",3,"text",4,"ngIf"],["id","userName-help",1,"p-error"],["id","password-help",1,"p-error"],["severity","warn",3,"text"]],template:function(e,t){1&e&&(i.Jb(0,"br"),i.Jb(1,"br"),i.Jb(2,"br"),i.Jb(3,"br"),i.Ob(4,"p-card",0),i.Ob(5,"form",1),i.Vb("ngSubmit",function(){return t.loginUser()}),i.Ob(6,"div",2),i.Ob(7,"div",3),i.Ob(8,"label",4),i.Bc(9,"Username"),i.Nb(),i.Ob(10,"input",5),i.Vb("blur",function(){return t.logValidationErrors()}),i.Nb(),i.zc(11,g,2,1,"small",6),i.Nb(),i.Ob(12,"div",3),i.Ob(13,"label",7),i.Bc(14,"Password"),i.Nb(),i.Ob(15,"input",8),i.Vb("blur",function(){return t.logValidationErrors()}),i.Nb(),i.zc(16,f,2,1,"small",9),i.Nb(),i.Ob(17,"div",3),i.Jb(18,"p-radioButton",10),i.Jb(19,"p-radioButton",11),i.Jb(20,"p-radioButton",12),i.Jb(21,"p-radioButton",13),i.Nb(),i.Ob(22,"div",3),i.Jb(23,"button",14),i.Nb(),i.Ob(24,"div",3),i.zc(25,I,1,1,"p-message",15),i.Nb(),i.Nb(),i.Nb(),i.Nb()),2&e&&(i.xb(4),i.xc(i.gc(10,E)),i.xb(1),i.dc("formGroup",t.authForm),i.xb(5),i.dc("ngClass",i.hc(11,v,t.formErrors.username)),i.xb(1),i.dc("ngIf",t.formErrors.username),i.xb(4),i.dc("ngClass",i.hc(13,v,t.formErrors.password)),i.xb(1),i.dc("ngIf",t.formErrors.password),i.xb(7),i.dc("disabled",t.authForm.invalid)("icon",t.loginIcon),i.xb(2),i.dc("ngIf",t.errorMessage))},directives:[c.a,s.o,s.j,s.e,s.a,m.a,s.i,s.c,a.i,a.k,p.a,d.b,b.a,h.b],styles:["*[_ngcontent-%COMP%], .p-card-subheader[_ngcontent-%COMP%]{color:#fff}"]}),e})();const S=[{path:"",component:y},{path:"login",component:y}];let N=(()=>{class e{}return e.\u0275mod=i.Gb({type:e}),e.\u0275inj=i.Fb({factory:function(t){return new(t||e)},imports:[[o.e.forChild(S)],o.e]}),e})();var w=r("4TcP");let C=(()=>{class e{}return e.\u0275mod=i.Gb({type:e}),e.\u0275inj=i.Fb({factory:function(t){return new(t||e)},imports:[[a.b,N,w.a]]}),e})()},Ug1E:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var a=r("z6cu"),o=r("oEQO"),s=r("fXoL"),n=r("tk/3"),i=r("tyNb");let u=(()=>{class e{constructor(e,t){this._httpClient=e,this.router=t}loginUser(e){return this._httpClient.post(`${o.a.BASE_URL}${o.a.LOGIN}`,e)}getStudentId(e){return this._httpClient.get(`${o.a.BASE_URL}${o.a.STUDENT}/id/${e}`)}getParentId(e){return this._httpClient.get(`${o.a.BASE_URL}${o.a.PARENT}/id/${e}`)}getFacultyId(e){return this._httpClient.get(`${o.a.BASE_URL}${o.a.FACULTY}/id/${e}`)}logoutUser(){localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("id"),localStorage.removeItem("studentId"),localStorage.removeItem("courseid"),localStorage.removeItem("semester"),this.router.navigate(["/auth"])}addLogin(e){return this._httpClient.post(`${o.a.BASE_URL}${o.a.CREATE_LOGIN}`,e)}getLogin(){return this._httpClient.get(`${o.a.BASE_URL}${o.a.CREATE_LOGIN}`)}handleError(e){return e.error instanceof ErrorEvent?console.error("Client side error: "+e.error.message):console.error("Server side error : "+e.status+" "+e.error),Object(a.a)("This is a problem with the service. We are notified and working on it. Please try again later.")}}return e.\u0275fac=function(t){return new(t||e)(s.Sb(n.b),s.Sb(i.b))},e.\u0275prov=s.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},oEQO:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var a=function(e){return e.BASE_URL="https://mycampusapp.azurewebsites.net/api/",e.COURSE="course",e.SUBJECT="subject",e.LOGIN="login/authenticate",e.CREATE_LOGIN="applicationlogin",e.STUDENT="student",e.PARENT="parent",e.FACULTY="faculty",e.PLACEMENT="placement",e.FEE="FeePaymentDetail",e.FACULTYWISESUBJECT="facultywisesubject",e.ATTENDENCE="Attendance",e.RESULT="result",e.ASSIGNMENT="assignment",e.ATTACHMENT="attachment",e.UPLOAD="upload",e.NOTIFICATION="notification",e.STUDENTDASHBOARD="studentdashboard",e}({})}}]);